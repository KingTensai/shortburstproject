<wicket:extend xmlns:wicket="http://www.w3.org/1999/xhtml">
    <div class="container mt-5">
        <h1>Order Statistics</h1>

        <div wicket:id="feedback"></div>

        <div class="mb-3">
            <label>Filter by Product:</label>
            <label>
                <select class="form-select" wicket:id="productFilter"></select>
            </label>
        </div>

        <canvas id="orderChart" width="900" height="400"></canvas>

        <span wicket:id="chartLabels" style="display:none"></span>
        <span wicket:id="chartData" style="display:none"></span>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        const ctx = document.getElementById('orderChart').getContext('2d');
        let orderChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: [],
                datasets: [{
                    label: 'Total Sales (â‚¬)',
                    data: [],
                    borderWidth: 2,
                    tension: 0.2
                }]
            },
            options: { responsive: true, scales: { y: { beginAtZero: true } } }
        });

        function updateOrderChart() {
            const labels = document.getElementById('chartLabels').innerText.split(',');
            const data = document.getElementById('chartData').innerText.split(',');

            orderChart.data.labels = labels;
            orderChart.data.datasets[0].data = data;
            orderChart.update();
        }

        document.addEventListener('DOMContentLoaded', updateOrderChart);
    </script>
</wicket:extend>
